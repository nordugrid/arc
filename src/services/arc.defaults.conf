########################################################################
##
## This is the arc.conf DEFAULT VALUES document
##  defining the default values for each option. 
##
## WARNING: this file will not work as a configuration template!
##     NEVER USE THIS DOCUMENT AS A CONFIGURATION FILE!
## 
## DO NOT MODIFY THIS FILE. Customizations are usually done in 
##    /etc/arc.conf
##
########################################################################
##
##  2017-07-03 WORK IN PROGRESS:
##
## This file inclides all defaults taken from arc.conf.reference
## I left the commented out strings for mandatory options, as we might 
## need to specify those in some way.
## Please read/grep the document for the ACTION tag and comment/discuss
## on how to proceed.
##
########################################################################


[common]

## *hostname = string - The FQDN of the frontend on which the ARC services are deployed.
## default: as a safety fallback solution, the return value of the shell command hostname -f is used
#hostname=myhost.org
#hostname=__EXEC__:hostname -f
http_proxy=NODEFAULT
x509_host_key=/etc/grid-security/hostkey.pem
x509_host_cert=/etc/grid-security/hostcert.pem
x509_cert_dir=/etc/grid-security/certificates
x509_voms_dir=/etc/grid-security/vomsdir
voms_processing=standard


[common/mapping]
gridmap=/dev/null

[userlist]

outfile=/etc/grid-security/grid-mapfile

## *source = url - the URL of the VO database which is used to generate the userlist.
## The nordugridmap will use this URL to automatically generate and keep
## up-to-date userlist (mapfile) specified by the 'outfile' attribute.
##
## url is a multivalued attribute, several sources can be specified
## and all the users from those sources will be merged into the same file.
## The source URLs are processed in the given order.
##
## Currently supported URL types are:
##    http(s)://  - URL to plain text file. File should contain a list
##                 of DNs with optional issuer certificate authority DN
##                 (see require_issuerdn): "user DN" ["issuer DN"]
##    voms(s)://  - URL to VOMS-Admin interface
##    file://     - local file (stand-alone or dynamicaly generated by
##                 nordugridmap). File should contain a list of DNs with
##                 optional mapped unixid: "user DN" [mapped user ID]
##                 Result of optional mapped unixid processing depend
##                 on mapuser_processing option settings.
##    userlist:// - reference to another [userlist/name] configuration block
##    nordugrid   - add NorduGrid VO members
##
## You can use either userlist:// or file:// entries to specify dependencies
## between [userlist/name] blocks, but using userlist:// is a recommended way.
##
## For each separate source URL it is possible to override some parameters
## value. You can use the following syntax to perform this:
##    source=URL < parameter1=value1 parameter2=value2
## You can override the following parameters:
##    mapped_unixid       for http(s),voms(s),ldap and file URLs
##    cache_enable        for http(s),voms(s),ldap and file URLs
##    voms_method         for voms(s) URLs
##    mapuser_processing  for file URLs with mapped_unixid='<unixid>' overrided
##                        (control mapped_unixid overriding behaviour for URL)
## multivalued
## default: not set
#source=vomss://voms.ndgf.org:8443/voms/nordugrid.org
#source=vomss://lcg-voms.cern.ch:8443/voms/atlas?/atlas/Role=VO-Admin < mapped_unixid=atlasadmin
#source=vomss://kuiken.nikhef.nl:8443/voms/gin.ggf.org < voms_method=get
#source=http://www.nordugrid.org/developers.dn
#source=file:///etc/grid-security/priviliged_users.dn
#source=userlist://biousers
#source=nordugrid
## CHANGE21: MODIFIED options: edg-mkgridmap source option is removed (obsolete technology);  vo source option is renamed as userlist.

mapped_unixid


[lrms]

sge_cell=default

## sge_qmaster_port = port - The SGE port options should be used in case SGE
## command line clients require SGE_QMASTER_PORT and SGE_EXECD_PORT environment
## variables to be set. Usually they are not necessary.
## default: default
#sge_qmaster_port=536

## sge_execd_port = port - The SGE port options should be used in case SGE
## command line clients requre SGE_QMASTER_PORT and SGE_EXECD_PORT environment
## variables to be set. Usually they are not necessary.
## default: default
#sge_execd_port=537

slurm_wakeupperiod=30

ll_consumable_resources=no

[lrms/ssh]

## *remote_host = hostname - Define the remote cluster frontend machine which contains
## session, cache and runtime directories and where jobs should be submitted to.
## default: not set
## mandatory
#remote_host=myremotehost.org

## *private_key = path - Location of the private key which should be used establish
## connection to the machine specified by the 'remote_host' attribute.
## default: not set
## mandatory
#private_key=/etc/grid-security/hostkey-priv.pem

## *remote_user = user - User on remote cluster which should be used for mounting
## directories, submitting and managing jobs, and gathering information about
## cluster.
## default: not set
## mandatory
#remote_user=grid

## *remote_cachedir = path - Cache directory on cluster frontend to be
## mounted (sshfs) on CE machine at directory specified by the 'cachedir'
## attribute in the [arex] block.
## default: not set
#remote_cachedir=/scratch/cache

ssh_timeout=10


[arex]

## user = user[:group] - Switch to a non root user/group after startup.
## Use with caution because of possible limited functionality.
## default: do not switch
#user=grid:grid
#ACTION: decide default username? user without equal as default (i.e. "")?

norootpower=no

delegationdb=sqlite

watchdog=no

loglevel=3

logfile=/var/log/arc/arex.log

fixdirectories=yes

## *controldir = path - The directory of the A-REX's internal job log files.
## The directory is not needed on the nodes. <must be set>.
## default: not set
#controldir=/var/spool/nordugrid/jobstatus

## *sessiondir = path [drain] - the directory which holds the sessiondirs of the grid jobs.
## Multiple session directories may be specified.
## In this case jobs are spread evenly over the session directories.
## If sessiondir=* is set, the session directory will be spread over the
## ${HOME}/.jobs directories of every locally mapped unix user. It is preferred
## to use common session directories. The path may be followed by "drain", in
## which case no new jobs will be assigned to that sessiondir, but current jobs
## will still be processed and accessible. <sessiondir must be set>
## multivalued
## default: not set
#sessiondir=/scratch/grid
#sessiondir=*

defaultttl=604800 2592000

shared_filesystem=yes

tmpdir=/tmp

maxrerun=5

wakeupperiod=180

infoproviders_timelimit=10800

pidfile=/var/run/arched-arex.pid

## mail = email_address - Specifies the email address from where the notification mails are sent
## default: <username>@<hostname>
#mail=grid.support@somewhere.org
## CHANGE43: modified. implement a default! in the format of root@localhost. 

gnu_time=/usr/bin/time

nodename=/bin/hostname

## helperlog = path - Configuration option to specify the location of log for helpers.
## default: /var/log/arc/job.helper.errors
## default: ???
#helperlog=/var/log/arc/job.helper.errors
## CHANGE44: new parameter


[arex/cache]

logfile=/var/log/arc/cache-clean.log

loglevel=3

## cachesize = max min - Specifies high and low watermarks for space used
## by cache, as a percentage of the space on the file system on which
## the cache directory is located. When the max is exceeded, files will
## be deleted to bring the used space down to the min level. It is a
## good idea to have the cache on its own separate file system. If cachesize
## is not specified the cache will not be cleaned by A-REX.
## default: do not clean
#cachesize=80 70
## ACTION: should "do not clean" have some way to be specified? -1 -1?

cacheshared=no

cachecleantimeout=3600


[arex/data-staging]

## statefile = path - (previously dtrlog) A file in which data staging state information
## (for monitoring and recovery purposes) is periodically dumped.
## default: controldir/dtr.state
#statefile=/tmp/dtr.state
## ACTION: How to express such default?

usehostcert=no

maxtransfertries=10

securetransfer=no

passivetransfer=yes

## globus_tcp_port_range = port_range - In a firewalled environment
## the software which uses GSI needs to know what ports are available.
## If not set a random port is selected.
## These variable are similar to the Globus enviroment variables:
## GLOBUS_TCP_PORT_RANGE and GLOBUS_UDP_PORT_RANGE.
## default: random port
#globus_tcp_port_range=9000,12000
## ACTION: how to express such default? explicitly set "random"?

## globus_udp_port_range = port_range - In a firewalled environment
## the software which uses GSI needs to know what ports are available.
## If not set a random port is selected.
## These variable are similar to the Globus enviroment variables:
## GLOBUS_TCP_PORT_RANGE and GLOBUS_UDP_PORT_RANGE.
## default: random port
#globus_udp_port_range=9000,12000
## ACTION: how to express such default? explicitly set "random"?

httpgetpartial=no

speedcontrol=0 300 0 300

maxdelivery=10

maxprocessor=10

maxemergency=1

maxprepared=200

localdelivery=no

## remotesizelimit = size - Lower limit on file size (in bytes) of files that remote
## hosts should transfer. Can be used to increase performance by transferring
## small files using local processes.
## default: no limit
#remotesizelimit=100000
## ACTION: how to express such default? -1 ?


[arex/ws]

## wsurl = url - (previously arex_mount_point) Specifies the base URL under which
## the web service intrefaces will be available. The URL argument must be a
## full URL consisting of protocol+host+port+path: e.g. https://<hostname>:<port>/<path>
## Make sure the chosen port is not blocked by firewall or other security rules.
## default: https://hostname:443/arex,  where hostname is taken from the [common] block
#wsurl=https://piff.hep.lu.se:443/arex
## ACTION: How to express such default?

logfile=/var/log/arc/ws-interface.log

max_job_control_requests=100

max_infosys_requests=1

max_data_transfer_requests=100


[arex/ws/emies]

allowunknown=no

allownew=yes

maxjobdesc=5242880


[arex/ws/argus]

arguspep_profile=emi

arguspep_usermap=no

arguspdp_profile=emi

arguspdp_acceptnotapplicable=no


[arex/jura]

logfile=/var/log/arc/jura.log

loglevel=3

urbatchsize=50

urdelivery_keepfailed=30

urdelivery_frequency=3600


[arex/jura/archiving]

archivedir=/var/log/arc/jura/archive

[arex/jura/sgas]

## *targeturl = url - The service endpoint URL of SGAS server.
## default: not set
#targeturl=https://grid.uio.no:8001/logger
## CHANGE104: new parameter

urbatchsize=50

[arex/jura/apel]
        
## *targeturl = url - The service endpoint URL of the APEL accounting server.
## default: not set
#targeturl=https://mq.cro-ngi.hr:6162
## CHANGE109: new parameter

## *topic = topic_name - Sets the name of the APEL topic to which JURA will publish the
## accounting records.
## default: not set
#topic=/topic/global.accounting.cpu.central
## CHANGE110: new parameter.

use_ssl=no

urbatchsize=1000

[gridftpd]

allowunknown=no

user=root:root

loglevel=3

logfile=/var/log/arc/gridftpd.log

pidfile=/var/run/gridftpd.pid

port=2811

encryption=no

allowactivedata=yes

maxconnections=100

defaultbuffer=65536

maxbuffer=655360

### Firewall specifics
## globus_tcp_port_range = port_range - In a firewalled environment
## the software which uses GSI needs to know what ports are available.
## If not set a random port is selected.
## These variable are similar to the Globus enviroment variables:
## GLOBUS_TCP_PORT_RANGE and GLOBUS_UDP_PORT_RANGE.
## default: random port
#globus_tcp_port_range=9000,12000
## ACTION: shall we explicitly allow "random"?

## globus_udp_port_range = port_range - In a firewalled environment
## the software which uses GSI needs to know what ports are available.
## If not set a random port is selected.
## These variable are similar to the Globus enviroment variables:
## GLOBUS_TCP_PORT_RANGE and GLOBUS_UDP_PORT_RANGE.
## default: random port
#globus_udp_port_range=9000,12000
## ACTION: shall we explicitly allow "random"?


[gridftpd/jobs]

allownew=yes

maxjobdesc=5242880


[infosys]

logfile=/var/log/arc/infoprovider.log

loglevel=1

## user = unix_user - the unix user running the infosys processes such as
## the slapd, the registrations and infoprovider scripts.
## By default the system ldap-user is used, you can run it as root if you wish.
## In case of non-root value you must make sure that the A-REX
## directories and their content are readable by the 'unix_user' and the 'unix_user'
## has access to the full LRMS information including jobs submitted by
## other users. The A-REX directories (controldir, sessiondir
## runtimedir, cachedir) are specified in the [arex] block
## default: the ldap_user
#user=root
## ACTION: how to express these kind of defaults? adotf? 

validity_ttl=10800


[infosys/ldap]

port=2135

slapd=/usr/sbin/slapd

slapadd=/usr/sbin/slapadd

slapd_loglevel=0

threads=32

timelimit=3600

## idletimeout = seconds - The native slapd idletimeout parameter. Maximum number of
## seconds the slapd server will wait before forcibly closing idle client
## connections. It's value must be larger than the value of "timelimit" option.
## If not set, it defaults to timelimit + 1.
## default: timelimit + 1
#idletimeout=1800
## ACTION: How to express these kind of defaults? Conf variables

infosys_ldap_run_dir=/var/run/arc/infosys/


[infosys/ldap/bdii]

bdii_debug_level=ERROR

provider_timeout=10800

bdii_location=/usr

bdii_run_dir=/var/run/arc/bdii

bdii_log_dir=/var/log/arc/bdii

bdii_tmp_dir=/var/tmp/arc/bdii

bdii_var_dir=/var/lib/arc/bdii

## bdii_update_pid_file = path  - Allows to change bdii-update
## pidfiles filename and location
## default: $bdii_run_dir/bdii-update.pid
#bdii_update_pid_file=/var/run/arc/bdii/bdii-update.pid
## ACTION: How to express this kind of default? configuration variables?

bdii_database=hdb

## bdii_conf = path - Location of the bdii config file generated by ARC.
## default: $infosys_ldap_run_dir/bdii.conf
#bdii_conf=/var/run/arc/infosys/bdii.conf
## ACTION: How to express this kind of default? configuration variables?

## bdii_update_cmd = path - path to bdii-update script
## default: ${bdii_location}/sbin/bdii-update
#bdii_update_cmd=/usr/sbin/bdii-update
## ACTION: How to express this kind of default? configuration variables?

bdii_db_config=/etc/bdii/DB_CONFIG

bdii_archive_size=0

bdii_breathe_time=10

bdii_delete_delay=0

## bdii_read_timeout = number - Sets BDII_READ_TIMEOUT in bdii configuration file
## default: $provider_timeout + $infoproviders_timelimit + $wakeupperiod
#bdii_read_timeout=300
## ACTION: How to express this kind of default? configuration variables?

bindmethod=ANONYM-ONLY

cachettl=0



[infosys/glue2]

admindomain_name=UNDEFINEDVALUE

admindomain_distributed=no

computingservice_qualitylevel=production

[infosys/glue2/ldap]

showactivities=no


[cluster]

homogeneity=True


[cluster/registration]
registrationlog=/var/log/arc/inforegistration.log

sizelimit=0

## *targetgiis = name - the name of the index service to which the registration to be sent. 
## default: none
#targetgiis=ATLASGIIS
## CHANGE212: NEW parameter

## *targethostname = hostname - the hostname of the machine running the registration target
## Index Service
## default: none
#targethostname=index.myinstitute.org
## CHANGE204: MOVED here from the obsoleted [infosys/cluster/registration/NAME] block

targetport=2135

regperiod=120

registrantport=2135

## registrantsuffix = string - the LDAP suffix of the registrant cluster resource
## It is automatically determined from the [infosys] block and the
## registration blockname. In this case the default registrantsuffix will be:
##    "nordugrid-cluster-name=hostname,Mds-Vo-name=local,o=Grid"
## please mind uppercase/lowercase characters above if defining
## allowreg in an index!
## Don't set it unless you want to overwrite the default.
#registrantsuffix=nordugrid-cluster-name=myhost.org,Mds-Vo-name=local,o=grid
## CHANGE210: MOVED here from the obsoleted [infosys/cluster/registration/NAME] block

## ttl = seconds - The suggested TTL to be included in the registration.  The default
## is twice the registration period.
## default: 2 x regperiod
#ttl=600
## CHANGE211: MOVED here from the obsoleted [infosys/cluster/registration/NAME] block
## ACTION: not sure what to do with these two.


[queue]
## ACTION: how to express a generic name? [queue:*] ?

homogeneity=True

scheduling_policy=FIFO


[datadelivery-service] 

## interface = hostname - Hostname of service host. Specifies hostname on which the service
## listens
## default: all available interfaces
#interface=localhost
## ACTION: how to express all interfaces?

port=443

ipversion=4

pidfile=/var/run/arched-datadelivery-service.pid

logfile=/var/log/arc/datadelivery-service.log

## user = username - user under which the service runs (should only be changed in special
## cases)
## default: user starting the service
#user=grid
## ACTION: how to express this?  no user?

secure=yes

## *allowed_ip = ip - IP address authorized to access service. Normally this is the
## A-REX host IP.
## multivalued
## default: not set
#allowed_ip=1.2.3.4
## CHANGE182: NEW

## *allowed_dir = path - Path the service is allowed to read/write to. This is usually
## one or more cache and/or session directories. See the CE sysadmin guide for
## more information on possible datadelivery service configurations
## multivalued
## default: not set
#allowed_dir=/shared/arc/cache
#allowed_dir=/shared/arc/session


[acix-scanner]

logfile=/var/log/arc/acix-cachescanner.log

port=5443

cachedump=no


[monitoring/perflog]

perflogdir=/var/log/arc/perfdata


[monitoring/ganglia]

gmetric_bin_path=/usr/bin/gmetric

logfile=/var/log/arc/gangliarc.log

pidfile=/var/run/gangliarc.pid

python_bin_path=/usr/bin/python

metrics=all

frequency=20


[nordugridmap]

gridmap_owner=root

gridmap_group=root

gridmap_permissions=0600

log_to_file=yes

logfile=/var/log/arc/nordugridmap.log

cache_enable=yes

cachedir=/var/spool/nordugrid/gridmapcache/

cachetime=259200

mapuser_processing=keep

allow_empty_unixid=yes

voms_method=soap

loglevel=2

fetch_timeout=15
